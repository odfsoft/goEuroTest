package com.goeuro.dao.impl;

import java.util.Arrays;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.web.client.RestTemplate;

import com.goeuro.dao.PositionDAO;
import com.goeuro.exception.ResultNotFoundException;
import com.goeuro.test.domain.Position;

@Repository
public class PositionDAOImpl implements PositionDAO {

	@Autowired
	RestTemplate restTemplate;
	
	@Override
	public List<Position> getPositions(String url) throws ResultNotFoundException {
		Position[] positions = restTemplate.getForObject(url, Position[].class);
		if(positions!=null && positions.length >0){
			return Arrays.asList(positions);		
		}else{
			throw new ResultNotFoundException("any result was found for your criteria, please try another one.");
		}	
	}
	
}
